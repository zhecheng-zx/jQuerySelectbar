function getSelectVal(e){var t=[],i=$("#"+e);return"multiple"==i.attr("multiple")?i.find("option[selected=selected]").each(function(e,i){var s=$(this).val();t.push(s)}):null!=i.val()&&""!=i.val()&&void 0!=i.val()&&t.push(i.val()),t}!function(e,t){if(e){var i={title:"请选择……",database:{department:[],employees:[]},values:[]},s=function(t,a){this.options=e.extend({},i,a),this.elem=e(t),this.title=options.title,this.className="selectbar",this.selectbarId="#"+this.elem.attr("id"),this.multiple=options.multiple,this.val=s.prototype.val};s.prototype={constructor:s,init:function(){this.initSelectDatabaseDom(),this.initDatabase(),this.initSelectSelected(),this.addEvent()},initDatabase:function(){this.select_item(-1)},select_item:function(e){var t=this.options.database||[],i="",s="",a=this;a.newDatabase=a.options.database.department.concat(a.options.database.employees),a.newDatabase&&a.newDatabase.length>0&&a.newDatabase.forEach(function(t,s){if(t.parentId==e){var n=a.selectItemDom(t);i+=n}}),-1==e&&(t.employees&&t.employees.length>0&&t.employees.forEach(function(e,t){var i=a.selectOptionDom(e);s+=i}),a.elem.parent().find("select.form-control").empty().append(s)),a.elem.parent().find(".tree-list .tree-content .list").empty().append(i)},initSelectSelected:function(){var e=this;e.options.values.forEach(function(t,i){e.options.database.employees.forEach(function(i,s){t==i.id&&e.addSelected(t,i.name)})})},addEvent:function(){var t=this,i=this.elem.parent();i.on("click",function(s){i.find(".vue-selector-input-wrap").show().css({top:i.height()}),e(document).one("click",function(){e(this).parents(t.selectbarId).length<=0&&i.find(".vue-selector-input-wrap").hide()}),s.stopPropagation()}),i.on("click",".select-item",function(){var s=e(this),a=s.find(".item-name").text();if(checkbox=s.find(".item-status input"),ids=checkbox.val(),s.find(".item-status").hasClass("departments"))t.select_item(ids),t.add_breadcrumb(ids,a);else{var n=i.find(".selector-input-list-wrap .selected-list .selected-item"),l=!0;n.each(function(i,s){if(e(this).find(".item-name").attr("_id")==ids)return t.removeSelected(ids),void(l=!1)}),l&&t.addSelected(ids,a)}}),i.on("click",".tree-list .tree-nav .old-node",function(){var i="";i="全部"==e(this).find(".nav-name").text().trim()?-1:e(this).find(".nav-name").attr("name"),e(this).removeClass("old-node").nextAll().remove(),t.select_item(i)}),i.on("click",".selected-list>li .remove-item",function(){var i=e(this).prev().attr("_id");t.removeSelected(i)}),i.on("keyup",".selector-search .search-input",function(){var i=e(this).val();if(""!=i&&null!=i&&void 0!=i){var s="",a=t.newDatabase.filter(function(e){return e.name.indexOf(i)>=0});a&&a.length>0?a.forEach(function(e){var i=t.selectItemDom(e);s+=i}):s+="<p>没有找到数据！</p>",e(this).next(".search-clear").show().one("click",function(){e(this).hide().prev("input").val(""),t.select_item(-1)}),t.elem.parent().find(".tree-list .tree-nav>li").eq(0).nextAll().remove(),t.elem.parent().find(".tree-list .tree-content .list").empty().append(s)}else t.select_item(-1)})},add_breadcrumb:function(e,t){var i=this,s=i.elem.parent(),a="";a+='<li class="nav-node"><div class="nav-name" name="'+e+'"> '+t+" </div>",a+='<div class="nav-right nav-last">',a+='<svg version="1.1" role="presentation" width="8" height="16" viewBox="0 0 8 16" class="octicon">',a+='<path d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"></path>',a+="</svg>",a+="</div></li>",s.find(".tree-list .tree-nav .nav-node").addClass("old-node"),s.find(".tree-list .tree-nav").append(a)},addSelected:function(t,i){var t=t,s=this,a=s.elem.parent(),n="";n+='<li><div class="selected-item">',n+='<span class="item-name" _id="'+t+'">'+i+"</span>",n+='<span class="iconfont icon-cha remove-item"></span>',n+="</div></li>",s.multiple?a.find(".selector-input-list-wrap .selected-list").append(n):a.find(".selector-input-list-wrap .selected-list").empty().append(n),a.find(".item-status input[value="+t+"]").prop("checked",!0),s.elem.find("option[value="+t+"]").attr("selected","selected");var l=!1;l=s.options.values.some(function(e){return e===t}),l||s.options.values.push(t),e(".selector-input-list-wrap").find(".search-clear").show().one("click",function(){e(this).hide(),a.find(".selector-input-list-wrap .selected-list .selected-item").each(function(t,i){var a=e(this).find(".item-name").attr("_id");s.removeSelected(a)})});var c=a.find(".selected-num .selected--num"),d=parseInt(c.text());d++,c.text(d)},removeSelected:function(e){var e=e,t=this.elem.parent();t.find(".item-status input[value="+e+"]").prop("checked",!1),t.find(".selector-input-list-wrap .selected-list .selected-item .item-name[_id="+e+"]").parents("li").remove(),this.elem.find("option[value="+e+"]").removeAttr("selected"),this.options.values=this.options.values.filter(function(t){return t!=e});var i=t.find(".selected-num .selected--num"),s=parseInt(i.text());s--,i.text(s)},selectOptionDom:function(e){var t=e;return this.options.values.some(function(e){return e==t.id})?'<option value="'+t.id+'" selected="selected">'+t.name+"</option>":'<option value="'+t.id+'">'+t.name+"</option>"},isChildren:function(e){var t=this;return t.options.database.department.concat(t.options.database.employees).some(function(t,i){return t.parentId===e})},selectItemDom:function(e){var t="",i="",s=this.options.values.some(function(t){return t==e.id});return this.isChildren(e.id)?(i='<div class="item-status departments"><div class="status-box"><input class="status" type="checkbox" value="'+e.id+'"></div></div>',t='<div class="item-group"><svg xmlns="http://www.w3.org/2000/svg" width="6" height="10" viewBox="0 0 6 10"><path fill="none" fill-rule="evenodd" stroke="#C3CBD9" stroke-linecap="round" stroke-linejoin="round" d="M1.322 9.16l4-4.16-4-4.16"></path></svg></div>'):(t="",i=this.multiple?s?'<div class="item-status"><div class="status-box"><input class="status" name="'+this.selectbarId+'" checked="checked" type="checkbox" value="'+e.id+'"></div></div>':'<div class="item-status"><div class="status-box"><input class="status" name="'+this.selectbarId+'" type="checkbox" value="'+e.id+'"></div></div>':s?'<div class="item-status"><div class="status-box"><input class="status" name="'+this.selectbarId+'" checked="checked" type="radio" value="'+e.id+'"></div></div>':'<div class="item-status"><div class="status-box"><input class="status" name="'+this.selectbarId+'" type="radio" value="'+e.id+'"></div></div>'),'<li class="select-item">'+i+'<div class="item-ell"><span title="'+e.id+'" class="item-name">'+e.name+"</span>"+t+"</div></li>"},searchClear:function(){var e=document.createElement("span");return e.className="search-clear",e.innerHTML='<i class="iconfont icon-cha"></i>',e},initSelectDatabaseDom:function(){var t=document.createElement("div"),i=(new Date).getTime();this.elem.hide().wrap(t).parent().addClass(this.className+" "+i),this.multiple&&this.elem.attr("multiple","multiple");var s=this.elem.parent(),a=e(document.createElement("div")),n=e(document.createElement("div")),l=e(document.createElement("ul")),c='<i class="iconfont icon-plus"></i><span class="trigger-text">'+this.title+"</span>";n.addClass("btn-trigger").append(c),l.addClass("selected-list"),a.addClass("selector-input-list-wrap").addClass(this.elem.attr("class")).append([l,n,this.searchClear()]),s.append([a,this.initSelectPanelWrapDom()]),s.find(".selector-search").append(this.searchClear())},initSelectPanelWrapDom:function(){var e=document.createElement("div");return e.className="vue-selector-input-wrap",e.appendChild(this.initSelectPanelDom()),e.appendChild(this.initSelectedCountDom()),e},initSelectPanelDom:function(){var e=document.createElement("div");e.className="selector-panel";return e.innerHTML='<div class="selector-search"><span class="search-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill="none" fill-rule="evenodd"><path data-v-501925db="" d="M0 0h16v16H0z"></path> <g transform="translate(1 1)"><circle cx="6" cy="6" r="5" stroke="#C3CBD9" stroke-width="2"></circle> <path fill="#C3CBD9" d="M9 10.414L10.414 9l2.952 2.952a.996.996 0 0 1-.002 1.412.995.995 0 0 1-1.412.002L9 10.414z"></path></g></g></svg></span><input placeholder="搜索" class="search-input" /></div><div class="switch-list-wrapper"><div class="switch-content"><div class="tree-list"><div class="tree-nav-wrap"><ul class="tree-nav"><li class="nav-node"><div class="nav-name"> 全部 </div><div class="nav-right"><svg version="1.1" role="presentation" width="8" height="16" viewBox="0 0 8 16" class="octicon"><path d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"></path></svg></div></li></ul></div><div class="tree-content"><div class="scroll-list"><ul class="list"></ul></div></div></div></div></div>',e},initSelectedCountDom:function(e){var t=document.createElement("div");return t.className="selected-num",t.innerHTML='<span class="selected--text">已选</span><span class="selected--num">'+(e||0)+"</span>",t}},e.fn.selectbar=function(t){return this.each(function(){var i=this,a=new s(i,t);"object"!=typeof t&&t?e.error("参数"+t+"在jQuery.selectbar中无效！"):a.init()})}}}(jQuery,window);